- defaults:
    link:
      relink: true

- link:
    ~/.config/alacritty: alacritty
    ~/.config/broot: broot
    ~/.config/fish: fish
    ~/.config/gh: gh
    ~/.gitconfig: .gitconfig
    ~/.config/lazygit: lazygitj
    ~/.oh-my-posh.nu: oh-my-posh/.oh-my-posh.nu
    ~/.mytheme.omp.json: oh-my-posh/.mytheme.omp.json
    ~/.config/nvim: nvim
    ~/.config/nushell: nushell
    ~/.rye: rye
    ~/.config/rofi: rofi
    ~/.config/tmux: tmux
    ~/.zoxide.nu: .zoxide.nu

- shell:
    - description: copy sudoers.d/ content
      command: sudo cp sudoers.d/password_feedback /etc/sudoers.d/.
      stdout: true
      stdin: true

    - description: Install curl
      command: sudo apt install curl -y
      stdout: true
      stdin: true

    - description: install oh-my-posh
      command: curl -s https://ohmyposh.dev/install.sh | sudo bash -s
      stdout: true
      stdin: true

    - description: install rust
      command: curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh
      stdout: true
      stdin: true

    - description: Install nala
      command: sudo apt install nala -y
      stdout: true
      stdin: true

    - description: install build-essential
      command: sudo nala install build-essential -y
      stdout: true
      stdin: true

    - description: Install small utilies
      command: sudo nala install xclip rofi tmux fortune cowsay fortune-mod gh -y
      stdout: true
      stdin: true

    - description: Install fish
      command: sudo nala install fish -y
      stdout: true
      stdin: true

    - description: Install ripgrep
      command: cargo install ripgrep
      stdout: true
      stdin: true

    - description: Install exa
      command: cargo install exa
      stdout: true
      stdin: true

    - description: Install alacritty dependencies
      command: apt install cmake pkg-config libfreetype6-dev libfontconfig1-dev libxcb-xfixes0-dev libxkbcommon-dev python3
      stdout: true
      stdin: true

    - description: Install alacritty
      command: cargo install alacritty
      stdout: true
      stdin: true

    - description: Set alacritty as default terminal
      command: |
        sudo update-alternatives --install /usr/bin/x-terminal-emulator x-terminal-emulator /usr/bin/alacritty 50
      stdout: true
      stdin: true

    - description: Install broot
      command: |
        cargo install --locked --features clipboard broot
      stdout: true
      stdin: true

    - description: Install zoxide
      command: |
        cargo install zoxide --locked
      stdout: true
      stdin: true

    - description: Install hyperfine
      command: |
        sudo nala install -y hyperfine
      stdout: true
      stdin: true

    - description: Install rye
      command: |
        curl -sSf https://rye-up.com/get | bash
      stdout: true
      stdin: true

    - description: Install lazygit
      command: |
        LAZYGIT_VERSION=$(curl -s "https://api.github.com/repos/jesseduffield/lazygit/releases/latest" | grep -Po '"tag_name": "v\K[^"]*')
        curl -Lo lazygit.tar.gz "https://github.com/jesseduffield/lazygit/releases/latest/download/lazygit_${LAZYGIT_VERSION}_Linux_x86_64.tar.gz"
        tar xf lazygit.tar.gz lazygit
        sudo install lazygit /usr/local/bin
      stdout: true
      stdin: true

    - description: Add neovim ppa
      command: |
        sudo add-apt-repository ppa:neovim-ppa/unstable
        sudo apt update
        sudo nala install -y python-dev python-pip python3-dev python3-pip neovim
      stdout: true
      stdin: true

    - description: Installing submodules
      command: git submodule update --init --recursive
